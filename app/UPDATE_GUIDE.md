# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ AI Hub + Alembic

## –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞
```bash
cd /opt/fitbud_bot
docker compose down
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø –ë–î (–í–ê–ñ–ù–û!)
```bash
docker compose up -d postgres  # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –ë–î
docker compose exec postgres pg_dump -U fitbud_user fitbud_bot > backup_$(date +%Y%m%d_%H%M%S).sql
docker compose down
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

–ó–∞–º–µ–Ω–∏—Ç–µ/–¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `alembic.ini`
- `alembic/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `migrate.sh`
- `docker-entrypoint.sh`
- `utils/openai_helper.py`
- `handlers/ai_hub.py`
- `AI_HUB_GUIDE.md`
- `ALEMBIC_GUIDE.md`
- `MIGRATION_GUIDE.md`

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `database/database.py`
- `database/__init__.py`
- `handlers/__init__.py`
- `utils/__init__.py`
- `main.py`
- `requirements.txt`
- `.env.example`
- `Dockerfile`
- `Makefile`

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ .env

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```bash
OPENAI_API_KEY=sk-proj-–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
```

### –®–∞–≥ 5: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

```bash
# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
docker compose build

# –ó–∞–ø—É—Å–∫ (–º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose logs -f bot
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic...
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –ë–î
make migrate-current

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 001_ai_hub (head)
```

## –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
docker compose up -d
```

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ!

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ entrypoint —Å–∫—Ä–∏–ø—Ç.

### ‚úÖ AI Hub
- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí –∞–Ω–∞–ª–∏–∑ –µ–¥—ã/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –§–æ—Ç–æ –µ–¥—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π
- –£–º–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `health_data` - –¥–ª—è –∞–Ω–∞–ª–∏–∑–æ–≤ –∫—Ä–æ–≤–∏, –≤–∏—Ç–∞–º–∏–Ω–æ–≤
- `ai_interactions` - –ª–æ–≥ –≤—Å–µ—Ö AI –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `calorie_entries` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è AI
- `workout_entries` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è AI

## –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ë–î –∏–∑ –±—ç–∫–∞–ø–∞
docker compose up -d postgres
cat backup_20250210_120000.sql | docker compose exec -T postgres psql -U fitbud_user -d fitbud_bot
docker compose down

# –û—Ç–∫–∞—Ç–∏—Ç–µ –∫–æ–¥ (–µ—Å–ª–∏ —á–µ—Ä–µ–∑ Git)
git checkout previous-commit

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
docker compose up -d
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
make migrate

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-downgrade

# –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
make migrate-history

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-create MSG="add something"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã AI Hub

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

1. **–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:** üé§ "–°—ä–µ–ª –æ–≤—Å—è–Ω–∫—É —Å –±–∞–Ω–∞–Ω–æ–º"
2. **–§–æ—Ç–æ –µ–¥—ã:** üì∏ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Ç–∞—Ä–µ–ª–∫–∏
3. **–¢–µ–∫—Å—Ç:** ‚úçÔ∏è "–ü—Ä–æ–±–µ–∂–∞–ª 5–∫–º –∑–∞ 30 –º–∏–Ω—É—Ç"
4. **–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è:** üí° "–ß—Ç–æ –º–Ω–µ —Å—ä–µ—Å—Ç—å –Ω–∞ —É–∂–∏–Ω?"

## Troubleshooting

**–û—à–∏–±–∫–∞: "Module openai not found"**
‚Üí –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑: `docker compose build`

**–û—à–∏–±–∫–∞: "OPENAI_API_KEY not set"**
‚Üí –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ

**–û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs bot`
‚Üí –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞

**–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≥–æ–ª–æ—Å/—Ñ–æ—Ç–æ**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å OpenAI: https://platform.openai.com/usage
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ API –∫–ª—é—á–∞

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [AI Hub Guide](./AI_HUB_GUIDE.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AI —Ñ—É–Ω–∫—Ü–∏–π
- [Alembic Guide](./ALEMBIC_GUIDE.md) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- [Migration Guide](./MIGRATION_GUIDE.md) - —Ä—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

---

**–ì–æ—Ç–æ–≤–æ! –ë–æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ AI Hub! üéâ**
